Warning: '-rm' is deprecated, it will be replaced by '--rm' soon. See usage.
Sending build context to Docker daemon 64.51 kB
Sending build context to Docker daemon 
Step 0 : FROM fedora:20
 ---> 88b42ffd1f7c
Step 1 : MAINTAINER scollier <scollier@redhat.com>
 ---> Running in df941d1b1e32
 ---> 4d67edb91367
Removing intermediate container df941d1b1e32
Step 2 : RUN yum -y update; yum clean all
 ---> Running in 426c1b91aeb1
Resolving Dependencies
--> Running transaction check
---> Package bash.x86_64 0:4.2.47-2.fc20 will be updated
---> Package bash.x86_64 0:4.2.47-3.fc20 will be an update
---> Package libtasn1.x86_64 0:3.6-1.fc20 will be updated
---> Package libtasn1.x86_64 0:3.7-1.fc20 will be an update
---> Package openssh.x86_64 0:6.4p1-4.fc20 will be updated
---> Package openssh.x86_64 0:6.4p1-5.fc20 will be an update
---> Package openssh-clients.x86_64 0:6.4p1-4.fc20 will be updated
---> Package openssh-clients.x86_64 0:6.4p1-5.fc20 will be an update
---> Package pcre.x86_64 0:8.33-5.fc20 will be updated
---> Package pcre.x86_64 0:8.33-6.fc20 will be an update
---> Package readline.x86_64 0:6.2-8.fc20 will be updated
---> Package readline.x86_64 0:6.2-10.fc20 will be an update
---> Package systemd.x86_64 0:208-19.fc20 will be updated
---> Package systemd.x86_64 0:208-21.fc20 will be an update
---> Package systemd-libs.x86_64 0:208-19.fc20 will be updated
---> Package systemd-libs.x86_64 0:208-21.fc20 will be an update
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch          Version              Repository      Size
================================================================================
Updating:
 bash                   x86_64        4.2.47-3.fc20        updates        997 k
 libtasn1               x86_64        3.7-1.fc20           updates        319 k
 openssh                x86_64        6.4p1-5.fc20         updates        340 k
 openssh-clients        x86_64        6.4p1-5.fc20         updates        471 k
 pcre                   x86_64        8.33-6.fc20          updates        439 k
 readline               x86_64        6.2-10.fc20          updates        189 k
 systemd                x86_64        208-21.fc20          updates        2.7 M
 systemd-libs           x86_64        208-21.fc20          updates        154 k

Transaction Summary
================================================================================
Upgrade  8 Packages

Total download size: 5.5 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
[91mwarning: /var/cache/yum/x86_64/20/updates/packages/bash-4.2.47-3.fc20.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 246110c1: NOKEY
[0mPublic key for bash-4.2.47-3.fc20.x86_64.rpm is not installed
--------------------------------------------------------------------------------
Total                                              996 kB/s | 5.5 MB  00:05     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-20-x86_64
[91mImporting GPG key 0x246110C1:
 Userid     : "Fedora (20) <fedora@fedoraproject.org>"
 Fingerprint: c7c9 a9c8 9153 f201 83ce 7cba 2eb1 61fa 2461 10c1
 Package    : fedora-release-20-3.noarch (@fedora-updates/$releasever)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-20-x86_64
[0mRunning transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : bash-4.2.47-3.fc20.x86_64                                   1/16 
  Updating   : openssh-6.4p1-5.fc20.x86_64                                 2/16 
  Updating   : systemd-libs-208-21.fc20.x86_64                             3/16 
  Updating   : systemd-208-21.fc20.x86_64                                  4/16 
  Updating   : openssh-clients-6.4p1-5.fc20.x86_64                         5/16 
  Updating   : readline-6.2-10.fc20.x86_64                                 6/16 
  Updating   : pcre-8.33-6.fc20.x86_64                                     7/16 
  Updating   : libtasn1-3.7-1.fc20.x86_64                                  8/16 
  Cleanup    : systemd-208-19.fc20.x86_64                                  9/16 
  Cleanup    : openssh-clients-6.4p1-4.fc20.x86_64                        10/16 
  Cleanup    : openssh-6.4p1-4.fc20.x86_64                                11/16 
  Cleanup    : readline-6.2-8.fc20.x86_64                                 12/16 
  Cleanup    : bash-4.2.47-2.fc20.x86_64                                  13/16 
  Cleanup    : systemd-libs-208-19.fc20.x86_64                            14/16 
  Cleanup    : pcre-8.33-5.fc20.x86_64                                    15/16 
  Cleanup    : libtasn1-3.6-1.fc20.x86_64                                 16/16 
  Verifying  : openssh-6.4p1-5.fc20.x86_64                                 1/16 
  Verifying  : systemd-libs-208-21.fc20.x86_64                             2/16 
  Verifying  : openssh-clients-6.4p1-5.fc20.x86_64                         3/16 
  Verifying  : bash-4.2.47-3.fc20.x86_64                                   4/16 
  Verifying  : systemd-208-21.fc20.x86_64                                  5/16 
  Verifying  : libtasn1-3.7-1.fc20.x86_64                                  6/16 
  Verifying  : pcre-8.33-6.fc20.x86_64                                     7/16 
  Verifying  : readline-6.2-10.fc20.x86_64                                 8/16 
  Verifying  : libtasn1-3.6-1.fc20.x86_64                                  9/16 
  Verifying  : openssh-clients-6.4p1-4.fc20.x86_64                        10/16 
  Verifying  : systemd-libs-208-19.fc20.x86_64                            11/16 
  Verifying  : readline-6.2-8.fc20.x86_64                                 12/16 
  Verifying  : pcre-8.33-5.fc20.x86_64                                    13/16 
  Verifying  : openssh-6.4p1-4.fc20.x86_64                                14/16 
  Verifying  : systemd-208-19.fc20.x86_64                                 15/16 
  Verifying  : bash-4.2.47-2.fc20.x86_64                                  16/16 

Updated:
  bash.x86_64 0:4.2.47-3.fc20        libtasn1.x86_64 0:3.7-1.fc20              
  openssh.x86_64 0:6.4p1-5.fc20      openssh-clients.x86_64 0:6.4p1-5.fc20     
  pcre.x86_64 0:8.33-6.fc20          readline.x86_64 0:6.2-10.fc20             
  systemd.x86_64 0:208-21.fc20       systemd-libs.x86_64 0:208-21.fc20         

Complete!
Cleaning repos: fedora updates
Cleaning up everything
 ---> a48604b9e1ad
Removing intermediate container 426c1b91aeb1
Step 3 : RUN yum -y install postgresql-server postgresql postgresql-contrib supervisor; yum clean all
 ---> Running in 542dea0857be
Resolving Dependencies
--> Running transaction check
---> Package postgresql.x86_64 0:9.3.4-1.fc20 will be installed
--> Processing Dependency: postgresql-libs(x86-64) = 9.3.4-1.fc20 for package: postgresql-9.3.4-1.fc20.x86_64
--> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-9.3.4-1.fc20.x86_64
---> Package postgresql-contrib.x86_64 0:9.3.4-1.fc20 will be installed
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.22)(64bit) for package: postgresql-contrib-9.3.4-1.fc20.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.18)(64bit) for package: postgresql-contrib-9.3.4-1.fc20.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.11)(64bit) for package: postgresql-contrib-9.3.4-1.fc20.x86_64
--> Processing Dependency: libxslt.so.1()(64bit) for package: postgresql-contrib-9.3.4-1.fc20.x86_64
--> Processing Dependency: libossp-uuid.so.16()(64bit) for package: postgresql-contrib-9.3.4-1.fc20.x86_64
---> Package postgresql-server.x86_64 0:9.3.4-1.fc20 will be installed
---> Package supervisor.noarch 0:3.0-1.fc20 will be installed
--> Processing Dependency: python-meld3 >= 0.6.5 for package: supervisor-3.0-1.fc20.noarch
--> Processing Dependency: python-setuptools for package: supervisor-3.0-1.fc20.noarch
--> Running transaction check
---> Package libxslt.x86_64 0:1.1.28-5.fc20 will be installed
---> Package postgresql-libs.x86_64 0:9.3.4-1.fc20 will be installed
---> Package python-meld3.x86_64 0:0.6.7-8.fc20 will be installed
---> Package python-setuptools.noarch 0:1.4.2-1.fc20 will be installed
--> Processing Dependency: python-backports-ssl_match_hostname for package: python-setuptools-1.4.2-1.fc20.noarch
---> Package uuid.x86_64 0:1.6.2-21.fc20 will be installed
--> Running transaction check
---> Package python-backports-ssl_match_hostname.noarch 0:3.4.0.2-1.fc20 will be installed
--> Processing Dependency: python-backports for package: python-backports-ssl_match_hostname-3.4.0.2-1.fc20.noarch
--> Running transaction check
---> Package python-backports.x86_64 0:1.0-3.fc20 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                              Arch    Version            Repository
                                                                           Size
================================================================================
Installing:
 postgresql                           x86_64  9.3.4-1.fc20       updates  3.1 M
 postgresql-contrib                   x86_64  9.3.4-1.fc20       updates  587 k
 postgresql-server                    x86_64  9.3.4-1.fc20       updates  3.8 M
 supervisor                           noarch  3.0-1.fc20         fedora   560 k
Installing for dependencies:
 libxslt                              x86_64  1.1.28-5.fc20      fedora   241 k
 postgresql-libs                      x86_64  9.3.4-1.fc20       updates  229 k
 python-backports                     x86_64  1.0-3.fc20         fedora   5.4 k
 python-backports-ssl_match_hostname  noarch  3.4.0.2-1.fc20     fedora    12 k
 python-meld3                         x86_64  0.6.7-8.fc20       fedora    72 k
 python-setuptools                    noarch  1.4.2-1.fc20       updates  413 k
 uuid                                 x86_64  1.6.2-21.fc20      fedora    53 k

Transaction Summary
================================================================================
Install  4 Packages (+7 Dependent packages)

Total download size: 9.0 M
Installed size: 40 M
Downloading packages:
--------------------------------------------------------------------------------
Total                                              1.4 MB/s | 9.0 MB  00:06     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : postgresql-libs-9.3.4-1.fc20.x86_64                         1/11 
  Installing : postgresql-9.3.4-1.fc20.x86_64                              2/11 
  Installing : uuid-1.6.2-21.fc20.x86_64                                   3/11 
  Installing : libxslt-1.1.28-5.fc20.x86_64                                4/11 
  Installing : python-meld3-0.6.7-8.fc20.x86_64                            5/11 
  Installing : python-backports-1.0-3.fc20.x86_64                          6/11 
  Installing : python-backports-ssl_match_hostname-3.4.0.2-1.fc20.noarc    7/11 
  Installing : python-setuptools-1.4.2-1.fc20.noarch                       8/11 
  Installing : supervisor-3.0-1.fc20.noarch                                9/11 
  Installing : postgresql-contrib-9.3.4-1.fc20.x86_64                     10/11 
  Installing : postgresql-server-9.3.4-1.fc20.x86_64                      11/11 
  Verifying  : python-setuptools-1.4.2-1.fc20.noarch                       1/11 
  Verifying  : python-backports-ssl_match_hostname-3.4.0.2-1.fc20.noarc    2/11 
  Verifying  : python-backports-1.0-3.fc20.x86_64                          3/11 
  Verifying  : postgresql-contrib-9.3.4-1.fc20.x86_64                      4/11 
  Verifying  : postgresql-libs-9.3.4-1.fc20.x86_64                         5/11 
  Verifying  : python-meld3-0.6.7-8.fc20.x86_64                            6/11 
  Verifying  : postgresql-9.3.4-1.fc20.x86_64                              7/11 
  Verifying  : libxslt-1.1.28-5.fc20.x86_64                                8/11 
  Verifying  : postgresql-server-9.3.4-1.fc20.x86_64                       9/11 
  Verifying  : uuid-1.6.2-21.fc20.x86_64                                  10/11 
  Verifying  : supervisor-3.0-1.fc20.noarch                               11/11 

Installed:
  postgresql.x86_64 0:9.3.4-1.fc20                                              
  postgresql-contrib.x86_64 0:9.3.4-1.fc20                                      
  postgresql-server.x86_64 0:9.3.4-1.fc20                                       
  supervisor.noarch 0:3.0-1.fc20                                                

Dependency Installed:
  libxslt.x86_64 0:1.1.28-5.fc20                                                
  postgresql-libs.x86_64 0:9.3.4-1.fc20                                         
  python-backports.x86_64 0:1.0-3.fc20                                          
  python-backports-ssl_match_hostname.noarch 0:3.4.0.2-1.fc20                   
  python-meld3.x86_64 0:0.6.7-8.fc20                                            
  python-setuptools.noarch 0:1.4.2-1.fc20                                       
  uuid.x86_64 0:1.6.2-21.fc20                                                   

Complete!
Cleaning repos: fedora updates
Cleaning up everything
 ---> cf3708ddc46d
Removing intermediate container 542dea0857be
Step 4 : ADD ./postgresql-setup /usr/bin/postgresql-setup
 ---> d34c5a7251fb
Removing intermediate container 80917c62c403
Step 5 : ADD ./postgres_user.sh /postgres_user.sh
 ---> 6b54bc4d15af
Removing intermediate container ed30aade2137
Step 6 : ADD ./supervisord.conf /etc/supervisord.conf
 ---> 59b7411d0fdb
Removing intermediate container f0963b32d4d7
Step 7 : ADD ./start_postgres.sh /start_postgres.sh
 ---> 3f285b1174bd
Removing intermediate container b3bd765be062
Step 8 : RUN chmod +x /usr/bin/postgresql-setup
 ---> Running in 5966829fd239
 ---> 15e7014152e4
Removing intermediate container 5966829fd239
Step 9 : RUN chmod +x /start_postgres.sh
 ---> Running in 114b8b40ca32
 ---> 4485e38a0e54
Removing intermediate container 114b8b40ca32
Step 10 : RUN chmod +x /postgres_user.sh
 ---> Running in 9cc9d30f79e5
 ---> 06f1caa5f4fb
Removing intermediate container 9cc9d30f79e5
Step 11 : RUN /usr/bin/postgresql-setup initdb
 ---> Running in 6f632d2a7fbb
Initializing database ... OK

 ---> e4437acce419
Removing intermediate container 6f632d2a7fbb
Step 12 : ADD ./postgresql.conf /var/lib/pgsql/data/postgresql.conf
 ---> a92c9edd43ff
Removing intermediate container 34377167fdc8
Step 13 : RUN chown -v postgres.postgres /var/lib/pgsql/data/postgresql.conf
 ---> Running in fde3f0bce635
changed ownership of '/var/lib/pgsql/data/postgresql.conf' from root:root to postgres:postgres
 ---> c7826fb31a66
Removing intermediate container fde3f0bce635
Step 14 : RUN echo "host    all             all             0.0.0.0/0               md5" >> /var/lib/pgsql/data/pg_hba.conf
 ---> Running in f3c3ccd41762
 ---> 92903eac95c3
Removing intermediate container f3c3ccd41762
Step 15 : RUN /postgres_user.sh
 ---> Running in 6944e88cae6d
[91mLOG:  redirecting log output to logging collector process
HINT:  Future log output will appear in directory "pg_log".
[0mUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.4  0.0  11592  2552 ?        Ss   21:24   0:00 /bin/bash /postgres_user.sh
root        11  0.1  0.0  72824  3548 ?        S    21:24   0:00 su --login postgres --command /usr/bin/postgres -D /var/lib/pgsql/data -p 5432
postgres    13  0.6  0.1 206484 12092 ?        Ss   21:24   0:00 /usr/bin/postgres -D /var/lib/pgsql/data -p 5432
postgres    26  0.0  0.0 190116  3112 ?        Ss   21:24   0:00 postgres: logger process   
postgres    28  0.0  0.0 206484  3716 ?        Ss   21:24   0:00 postgres: checkpointer process   
postgres    29  0.0  0.0 206484  3716 ?        Ss   21:24   0:00 postgres: writer process   
postgres    30  0.0  0.0 206484  3716 ?        Ss   21:24   0:00 postgres: wal writer process   
postgres    31  0.0  0.0 207176  6372 ?        Ss   21:24   0:00 postgres: autovacuum launcher process   
postgres    32  0.0  0.0 192208  3892 ?        Ss   21:24   0:00 postgres: stats collector process   
root        33  0.0  0.0  19740  2180 ?        R    21:25   0:00 ps aux
CREATE ROLE
CREATE DATABASE
                              List of roles
 Role name  |                   Attributes                   | Member of 
------------+------------------------------------------------+-----------
 dockeruser | Superuser, Create role                         | {}
 postgres   | Superuser, Create role, Create DB, Replication | {}

 ---> 659566f51715
Removing intermediate container 6944e88cae6d
Step 16 : EXPOSE 5432
 ---> Running in 18310ec06c0b
 ---> 81c3b777e878
Removing intermediate container 18310ec06c0b
Step 17 : CMD ["/bin/bash", "/start_postgres.sh"]
 ---> Running in fb5ff755ce7e
 ---> 9a8b48ef76aa
Removing intermediate container fb5ff755ce7e
Successfully built 9a8b48ef76aa
